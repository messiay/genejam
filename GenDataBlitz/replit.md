# Rural Health Educators - Gamified Health Learning Platform

## Overview
A comprehensive AI-powered rural health education platform designed to combat preventable diseases in rural communities through three integrated modules:

1. **Doctor Data Collection** - Healthcare workers submit anonymous prescription data for disease monitoring
2. **Gamified Learning** - Interactive quizzes and educational content for public health education
3. **Public Alert Broadcasting** - AI-generated health alerts displayed on public screens

## Project Status
**Production-Ready MVP** - All core features implemented and tested

Last Updated: November 2, 2025

## Recent Changes
- Implemented complete full-stack application with React + Express + PostgreSQL
- Integrated Replit Auth for user authentication with role-based access (public, doctor, admin)
- Set up OpenAI GPT-5 integration for AI-powered health alert generation and quiz question creation
- Created comprehensive database schema with 7 main tables (users, prescriptions, health alerts, diseases, quiz questions, user progress, quiz attempts)
- Built responsive UI with dark mode support following healthcare-focused design guidelines
- Seeded initial database with 6 common diseases (Dengue, Malaria, Diarrhea, Typhoid, TB, Cholera)
- Fixed session cookie security to work in both development (HTTP) and production (HTTPS) environments

## User Roles

### Public Users
- Access gamified learning modules
- Take quizzes on diseases
- View leaderboards and track progress
- View public health alerts

### Doctors
- All public user features
- Submit prescription data (age, gender, diagnosis, symptoms, region)
- View submission statistics and trends
- Receive regional health alerts

### Admins
- All doctor features
- Access comprehensive analytics dashboard
- View system-wide statistics and trends
- Monitor all health alerts and prescriptions
- Create new diseases and manage content

## Technical Architecture

### Frontend
- **Framework**: React with TypeScript
- **Routing**: Wouter
- **State Management**: TanStack Query v5
- **UI Components**: Shadcn UI with Radix primitives
- **Styling**: Tailwind CSS with custom design tokens
- **Charts**: Recharts for data visualization
- **Features**: Dark mode, responsive design, voice input, accessibility

### Backend
- **Framework**: Express.js with TypeScript
- **Database**: PostgreSQL (Neon)
- **ORM**: Drizzle ORM
- **Authentication**: Replit Auth (OpenID Connect)
- **Session**: PostgreSQL session store
- **AI**: OpenAI GPT-5 for content generation
- **Validation**: Zod schemas

### Key Features
- **Real-time disease monitoring**: Automatic alert generation when case thresholds are exceeded
- **AI-powered content**: Health alerts and quiz questions generated by GPT-5
- **Gamification**: Points, levels, streaks, leaderboards
- **Multi-language support**: Framework ready (currently English)
- **Voice input**: Browser speech recognition for accessibility
- **Responsive design**: Mobile-first approach

## Database Schema

### Core Tables
1. **users** - User accounts with role-based access, points, levels, streaks
2. **sessions** - Session storage for authentication
3. **prescriptions** - Anonymous patient data (age, gender, diagnosis, symptoms, region)
4. **healthAlerts** - AI-generated disease outbreak alerts
5. **diseases** - Disease information and educational content
6. **quizQuestions** - Learning module questions
7. **userProgress** - Individual progress tracking per disease
8. **quizAttempts** - Quiz answer history

## Environment Variables
- `DATABASE_URL` - PostgreSQL connection string (auto-configured)
- `SESSION_SECRET` - Session encryption key (auto-configured)
- `OPENAI_API_KEY` - OpenAI API key for GPT-5
- `REPL_ID` - Replit project ID (auto-configured)
- `ISSUER_URL` - OIDC issuer URL (defaults to Replit)

## API Endpoints

### Authentication
- `GET /api/login` - Start login flow
- `GET /api/logout` - Logout
- `GET /api/callback` - OAuth callback
- `GET /api/auth/user` - Get current user (protected)

### Prescriptions
- `POST /api/prescriptions` - Submit prescription (doctor/admin only)
- `GET /api/prescriptions/recent` - Get doctor's recent submissions (protected)
- `GET /api/doctor/stats` - Get doctor statistics (protected)

### Health Alerts
- `GET /api/alerts/active` - Get active alerts (optional region filter)
- `POST /api/alerts` - Create alert (admin only)

### Diseases & Learning
- `GET /api/diseases` - Get all diseases
- `POST /api/diseases` - Create disease with AI quiz generation (admin only)
- `GET /api/quiz/:diseaseId` - Get quiz questions for disease
- `POST /api/quiz/answer` - Submit quiz answer (protected)
- `GET /api/progress` - Get user progress (protected)
- `GET /api/leaderboard` - Get top learners

### Admin
- `GET /api/admin/stats` - Comprehensive system statistics (admin only)
- `GET /api/admin/alerts` - All alerts (admin only)
- `GET /api/admin/recent-activity` - Recent prescriptions (admin only)

## Development

### Running Locally
```bash
npm run dev
```
The application runs on port 5000 with hot-reload enabled.

### Database Migrations
```bash
npm run db:push
```
Syncs Drizzle schema to PostgreSQL database.

### Seeding Data
```bash
npx tsx server/seed.ts
```
Seeds initial disease data (Dengue, Malaria, Diarrhea, Typhoid, TB, Cholera).

## Design System

### Colors
- **Primary**: Teal/Cyan for health and trust
- **Charts**: 5-color palette for data visualization
- **Severity Indicators**: 
  - Low: Chart-1 (teal)
  - Medium: Chart-3 (amber)
  - High: Chart-4 (red)
  - Critical: Destructive (deep red)

### Typography
- **Sans**: Inter - Data, forms, dashboards
- **Body**: Poppins - Educational content, public-facing

### Components
All components follow Shadcn UI patterns with healthcare-specific customizations.

## Security Considerations

1. **No PII Collection**: Prescription data is anonymous (no patient names, IDs, or contact info)
2. **Role-based Access**: Proper authorization checks on all protected endpoints
3. **Session Security**: Secure cookies in production, HTTP-only, 1-week TTL
4. **Input Validation**: Zod schemas validate all user inputs
5. **SQL Injection Prevention**: Drizzle ORM parameterized queries

## Future Enhancements

### Phase 2 (Not in MVP)
- SMS/WhatsApp broadcasting via Twilio integration
- RAG system with vector database (FAISS/ChromaDB) for enhanced contextual responses
- Integration with WHO/CDC public health databases
- OCR for prescription scanning
- Multi-language support (Hindi, regional languages)
- Mobile app (React Native)
- Offline mode for low-connectivity areas
- Community health worker training modules
- Seasonal disease prediction models

## Known Limitations

1. **OpenAI Dependency**: Alert and quiz generation requires API access
2. **Single Region Focus**: Current implementation assumes regional boundaries
3. **Manual Disease Entry**: Admin must add new diseases (future: auto-detect from prescriptions)
4. **English Only**: UI not yet translated
5. **No SMS/WhatsApp**: Future integration planned

## Testing

### Manual Testing Checklist
- [ ] Landing page loads correctly
- [ ] Login flow works (redirects to learning page)
- [ ] Doctor can submit prescription
- [ ] Alert generated after threshold cases
- [ ] Quiz questions load and scoring works
- [ ] Leaderboard updates after quiz completion
- [ ] Public display shows active alerts
- [ ] Admin dashboard shows statistics
- [ ] Dark mode toggle works
- [ ] Responsive on mobile devices

### User Flows
1. **Public User**: Login → Browse diseases → Take quiz → Earn points → View leaderboard
2. **Doctor**: Login → Submit prescription → View stats → Check alerts → Learn about diseases
3. **Admin**: Login → View analytics → Monitor alerts → Add diseases → Manage system

## Deployment

The application is ready to publish on Replit with:
- Automatic HTTPS in production
- Secure session cookies
- Database persistence
- Environment variable management

## Credits
Built for rural health education and disease prevention by Team Gen Data.

## License
Educational project - 2025
